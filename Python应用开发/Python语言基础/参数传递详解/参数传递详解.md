# Python函数参数传递详解

本篇笔记讲解Python的函数参数传递。Python传递函数参数有一些有趣的规则，掌握这些语言特性能够编写出更加优雅的代码。

## 值传递和引用传递

我们学习C++和Java的时候，都要严格区分这两个定义，值传递是将参数整个拷贝到函数的运行时栈中，引用传递只是传递了一个对象的引用。但Python中实际并不明确区分这两个概念，因为作为一个由高级语言（C语言）开发的高级语言，Python试图抽象底层。我们不需要考虑太多，记住一个规则：传递不可变对象时，看做“值传递”，传递可变对象时，看做“引用传递”就行了。

* 不可变对象：如字符串str，元组tuple，基本类型（int float bool）
* 可变对象：列表list，字典dict，集合set，自定义的对象等

```python
def test(l):
	l.append("a")

l = ["b"]
test(l)
print(l)
```

上面代码中，list就是可变对象，因此函数内执行`l.append("a")`会影响这个列表对象。最后会输出`['b', 'a']`。

## 默认参数

默认参数可以为一个参数设置默认值。用户使用这个函数时，如果没有传入默认参数的值，就使用其默认值。

```python
def power(x, n=2):
	result = 1
	for i in range(0, n):
		result *= x
	return result

print(power(2))
print(power(2, 4))
```

上面代码中是求`x^n`的函数，我们为`n`设置了默认值`n=2`，因此不传入n时，默认使用2，传入时就使用传入的n值。

注意：如果参数默认值是可变对象，要注意它只会初始化一次，这会引起一些混乱。因此建议默认参数只是用不可变对象。

## 变长参数

变长参数非常有用。下面看一个例子：

```python
def print_args(*nums):
	for i in nums:
		print(i)

print_args(1, 2, 3, 4)
```

python使用`*`表示变长参数，函数体内，变长参数会被组装成元组，使用这个参数和使用元组是一样的。

## 关键字参数

关键字参数允许传入若干个键值对，下面是一个例子：

```python
def print_args(**args):
	for i, j in args.items():
		print(i, "=>", j)

print_args(name="Tom", age=10)
```

调用函数时，传入的是键值对，函数体内，我们像迭代dict一样迭代关键字参数，不过要注意，实际上关键字参数传入函数体内后是不可变对象。

有时候，这种写法不合适，比如开发一个类库时，我们写个`**args`，用户怎么可能知道究竟要他传什么参数呢？用户还可能随意传入函数不需要的关键字。这种情况下，推荐把关键字参数展开来写：

```python
def print_args(*, name, age=10):
	print("name => ", name)
	print("age => ", age)

print_args(name="Tom", age=15)
print_args(name="Jerry")
```

我们使用一个占位置的`*`表示后面是关键字参数，其后跟着两个参数，这里还为`age`设置了默认值。用户调用时，IDE会自动提示出函数的参数列表，用户也不能随意传入参数，这样写就比较优雅了。

## 注意

定义函数参数时，必须按照：普通参数，变长参数，关键字参数的顺序进行定义，否则解释器是无法识别参数的具体含义的。
