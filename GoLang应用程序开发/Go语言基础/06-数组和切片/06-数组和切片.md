# 数组和切片

Go语言中具有定长数组和变长数组，其中变长数组叫切片（slice），含义和操作方法和Python中切片函数的操作形式完全一致。

## 数组

数组使用`[n]T`的形式定义，其中`n`为数组的长度，`T`为数据类型。

```go
var arr [2]string
arr[0] = "hello"
arr[1] = "world"
```

注意：Go语言中对数组进行变量赋值，函数传值等操作，传递的都是整个数组，也就是说是值传递的。而且，数组的类型包括其内部的数据类型和长度，`[2]string`和`[3]string`是不同的类型。

## 变长数组（切片）

### 变长数组初始化

定义时不指定数组长度就是变长数组了，如下方式创建了一个空的变长数组，我们可以使用`append()`函数为其添加元素，返回值是添加元素后的变长数组。

```go
var arr []string
arr = append(arr, "hello")
arr = append(arr, "world")
```

注：`var arr []string`声明的空变长数组，其值`arr`为`nil`。

我们可以直接在声明时指定变长数组的初始值：
```go
var arr = []string{"hello", "world"}
```

或者可以使用`make`关键字初始化一个有一定长度的空变长数组：
```go
var arr = make([]string, 3)
```

注意：该种写法由于已经初始化了几个元素，只不过它们是默认的空值，而`append()`只是在变长数组末尾添加，不要搞混了。

变长数组和数组虽然写法差不多，但是内部可是差别很大。变长数组为了实现动态增长，需要额外的存储空间实现一个用作索引的指针，对应真正的数据区域。正因如此，变长数组虽然也是值传递，但复制的仅是一堆指针，真正底层的数据区域并没有发生复制，因此需要考虑深浅拷贝的问题。

### 变长数组组合和切分

变长数组实现删除，和Python中切片函数很像：

```go
arr = append(arr[:1], arr[2:]...)
```

注：`...`是Go语言的一个语法糖，作用是将一个数组打散传递，我们可完全可以用一个循环取出`arr[2:]`中的所有元素然后挨个`append()`，但是写起来就比较麻烦了。

同理，如果想在数组中间插入，也是完全可以用切片实现的，这里就不多介绍了。

### 变长数组拷贝

切片复制可以使用遍历或`append()`与`...`语法联用实现，更简单的办法是使用`copy()`函数。下面代码将`arr`的内容复制给`arr2`，注意`arr2`必须有个初始长度，否则是无法复制的，如果`arr2`比`arr`短，只会按顺序复制`len(arr2)`个元素：

```go
var arr = []string{"1", "2", "3"}
var arr2  = make([]string, 3)
copy(arr2, arr)
```
