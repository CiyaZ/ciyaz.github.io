# 结构体

Go语言中没有`class`，只有一个结构体`struct`，但是和C++差不多，结构体中也能定义成员函数，因此也可以实现面向对象。

## 结构体定义和初始化

Go语言中结构体写法也是倒过来的，而且要加个`type`关键字：

```go
type Vector2 struct {
	X int
	Y int
}
```

注：其实Go语言的写法更好理解，C/C++才是真的绕，然而C/C++已经写习惯了，使用正常的思维方式反倒感觉有些奇怪。

使用如下写法初始化一个结构体，初始化后我们可以直接打印输出：

```go
package main

import "fmt"

type Vector2 struct {
	X int
	Y int
}

func main() {
	var vec = Vector2{3, 5}
	fmt.Println(vec)
}
```

输出结果：
```
{3 5}
```

初始化时，我们也可以指明字段的值：

```go
var vec = Vector2{2, 3}
```

我们也可以不指明任何值，结构体的成员变量会初始化为默认值：

```go
var vec = Vector2{}
```

## 初始化结构体并获得一个指针

Go语言提供了`new`关键字，用它初始化一个结构体可以返回一个指向空结构体的指针。

```go
var vec2 = new(Vector2)
```

如果需要在初始化结构体时直接赋值，我们直接使用取地址符就可以。

```go
var vec = &Vector2{2, 3}
```

这种写法也可以不指定任何值：
```go
var vec = &Vector2{}
```

上面两种写法，初始化内存的机制可以看做是相似的，这和C/C++非常不同。

尽管Go语言有`new`关键字，但是Go编译器会自动选择为变量分配栈内存还是堆内存，我们无法对其控制，也就是说`var vec = Vector2{3, 5}`或`var vec = new(Vector2)`分配的内存我们根本无法确定其在栈上还是在堆上，这显然会让大多数C/C++程序员感到无法理解。

实际上，以现在CPU的性能，我们的应用程序瓶颈根本不会卡在栈内存还是堆内存这个问题上，Go语言这么设计是更加为开发者不要花过多的精力在繁琐的语法细节上考虑，如果你觉得某个模块这样写不好，或不适合当前项目，大可以用C/C++去写，然后使用Go语言去调用动态链接库。

## 结构体成员变量的访问

Go语言中使用点号`.`访问结构体对象的成员：

```go
var vec = Vector2{2, 3}
fmt.Println(vec.X, vec.Y)
```

注：即使是指针，也可以直接用`.`访问。
